<!DOCTYPE html>
<html>

<head>
    <title>Goods.com</title>
    <link rel="stylesheet" type="text/css" href="assets/style.css"/>

    <style>

        #searchBar 
        {
         width: 600px; /* Adjust the width as needed */
        }

        .navBar input[type="text"] {
          width: 600px;
      }

    </style>
    
</head>

<body>
    <div class="navBar">
        <img id="logo" src="assets/goods_logo.png" alt="alternative text"/>
      <input type="text" placeholder="Search for products in goods.com" />
        <button type="submit">Search<i class="fa-search"></i></button>
        <div id="listing">
            <ul>
                <a href="/account.html">Account</a>
                <a href="/cart.html">Cart</a>
                <a href="/status.html">Your orders</a>
                <a href="/index.html"> Main </a>
                <a href="/geoLocation.html"> Tracking </a>        
              </ul>
          </div>
    </div>

    <h1>User IDs</h1>
    <div id="userID"></div>
  
    <h1>Order Status</h1>
    <div id="orderStatus"></div>

    <h1>Shipping Status</h1>
    <div id="shippingStatus"></div>

    <h1>Tracking Code</h1>
    <div id="trackingCode"></div>

    <h1>Shipping Provider</h1>
    <div id="shippingProvider"></div>

    <h1>Completion Confirmation</h1>
    <div id="completion"></div>

  <script>
    async function fetchStatus() {

    let orderStatus, shippingStatus, userID, completionConfirmation, trackingCode;
    //let shippingProvider;

    // Attempt to get the orderStatus from the database
    try 
    {
        //Get the orderStatus from the database
        const response1 = await fetch('/orderStatus');
        const data1 = await response1.json();
        orderStatus = data1[1];

        //document.getElementById('orderStatus').innerText = JSON.stringify(orderStatus);

        //document.getElementById('orderStatus').innerText = JSON.stringify(data);
    } 
    catch (error) 
    {
        console.error(error);
    }

    // Attempt to get the shippingStatus from the database
    try 
    {
        const response2 = await fetch('/shippingStatus');
        const data2 = await response2.json();
        shippingStatus = data2[1];

        //document.getElementById('shippingStatus').innerText = JSON.stringify(shippingStatus);
        //document.getElementById('shippingStatus').innerText = JSON.stringify(data);
    } 
    catch (error) 
    {
        console.error(error);
    }

    // Attempt to get the userID
    try 
    {
        const response3 = await fetch('/userID');
        const data3 = await response3.json();
        userID = data3[1];

        //document.getElementById('userID').innerText = JSON.stringify(userID);
        //document.getElementById('userID').innerText = JSON.stringify(data);
    } 
    catch (error)
    {
        console.error(error);
    }

    //Attempt to get completionConfirmation value from database
    try 
    {

        const response4 = await fetch('/completionConfirmation');
        const data4 = await response4.json();
        completionConfirmation = data4[1];

        //document.getElementById('completion').innerText = JSON.stringify(completionConfirmation);
        //document.getElementById('userID').innerText = JSON.stringify(data);
    } 
    catch (error) 
    {
        console.error(error);
    }

    //Attempt to get completionConfirmation value from database
    try 
    {
        const response5 = await fetch('/trackingCODES');
        const data5 = await response5.json();
        trackingCode = data5[1];

        //document.getElementById('trackingCode').innerText = JSON.stringify(trackingCode);
        //document.getElementById('userID').innerText = JSON.stringify(data);
    } 
    catch (error) 
    {
        console.error(error);
    }

    // Attempt to get the shippingProvider from the database
    try 
    {
        //Get the orderStatus from the database
        const response6 = await fetch('/shippingProvider');
        const data6 = await response6.json();
        shippingProvider = data6[1];

        //document.getElementById('shippingProvider').innerText = JSON.stringify(shippingProvider);

        //document.getElementById('shippingProvider').innerText = JSON.stringify(data6);
    } 
    catch (error) 
    {
        console.error(error);
    }

    if(orderStatus=='IN PROGRESS' && shippingStatus=='ASSEMBLY')
    {

        document.getElementById('orderStatus').innerText = JSON.stringify(orderStatus);
        document.getElementById('shippingStatus').innerText = JSON.stringify(shippingStatus);

    }
    else if(orderStatus=='IN PROGRESS' && shippingStatus=='SHIPPING')
    {

        document.getElementById('orderStatus').innerText = JSON.stringify(orderStatus);
        document.getElementById('shippingStatus').innerText = JSON.stringify(shippingStatus);
        document.getElementById('shippingProvider').innerText = JSON.stringify(shippingProvider);
        document.getElementById('trackingCode').innerText = JSON.stringify(trackingCode);
        
    }
    else if(orderStatus=='NO ORDER')
    {

        document.getElementById('orderStatus').innerText = JSON.stringify(orderStatus);

    }


    }

    // Execute both fetch requests independently
    fetchStatus();

  </script>
</body>
</html>